#include<iostream>
#include<iomanip>
#include<conio.h>
#include<string>
#include<windows.h>
#include<fstream>
using namespace std;

   char l_destination[10][20]={"CHENNAI","MADURAI","COIMBATORE","BANGALORE","Salem","Hosur","Neyveli","Vellore","Ramanathapuram","Tirichrapalli"};
       char i_destination[10][20]={"LONDON","BERLIN","DUBAI","NEW YORK","BEIJING","PARIS","CAPE TOWN","TOKYO","LOS ANGELES","MUMBAI" };
class mytime
{
protected:
 int choose;
public:
 void getdata()
 {
  cout<<"\tON WHICH TIME YOU WANT TO TRAVEL\n"<<endl;//proper identation
  cout<<"\tPRESS 1 FOR 11 AM\n"<<endl;
  cout<<"\tPRESS 2 FOR 10 AM\n"<<endl;
  cout<<"\tPRESS 3 FOR 9 AM\n"<<endl;
  cin>>choose;
 }
 void show()
 {
  if(choose==1)
  {
    cout<<"|                                                                         "<<endl;
    cout<<"|flight mytime 11 AM                                                        "<<endl;
    cout<<"|_________________________________________________________________________"<<endl;
    cout<<"                  \tGOOD BYE AND HAVE A SAFE JOURNEY                       \n "<<endl;
    ofstream outfile;
    outfile.open("E:\\E_ticket.txt",ios::app);
    outfile<<"|                                                                         "<<endl<<
             "|flight mytime 11 AM                                                        "<<endl<<
                         "|_________________________________________________________________________"<<endl<<
       "                  GOOD BYE AND HAVE A SAFE JOURNEY                        "<<endl;
  }
  if(choose==2)
  {
    cout<<"|                                                                         "<<endl;
    cout<<"\t|flight mytime 10 AM                                                 \n       "<<endl;
    cout<<"\t|_________________________________________________________________________\n"<<endl;
    cout<<"               \t   GOOD BYE AND HAVE A SAFE JOURNEY                       \n "<<endl;
    ofstream outfile;
    outfile.open("E:\\E_ticket.txt",ios::app);
    outfile<<"|                                                                         "<<endl<<
             "|flight mytime 10 AM                                                        "<<endl<<
                         "|_________________________________________________________________________"<<endl<<
       "                  GOOD BYE AND HAVE A SAFE JOURNEY                        "<<endl;
  }
  if(choose==3)
  {
    cout<<"|                                                                         "<<endl;
    cout<<"|flight mytime 9 AM                                                        "<<endl;
    cout<<"|_________________________________________________________________________"<<endl;
    cout<<"                  GOOD BYE AND HAVE A SAFE JOURNEY                        "<<endl;
    ofstream outfile;
    outfile.open("E:\\E_ticket.txt",ios::app);
    outfile<<"|                                                                         "<<endl<<
             "|flight mytime 9 AM                                                        "<<endl<<
                         "|_________________________________________________________________________"<<endl<<
       "                  GOOD BYE AND HAVE A SAFE JOURNEY                        "<<endl;
  }
 }
};
class passenger
{
public:
    virtual void getdata()
 {
 }
virtual void show()
 {
 }
};
class booking:public passenger
{
protected:
 int num,option;//variable declaration
 char ch,fname[60],lname[60],add[60],c_loc[30],dest[30],reserv_no[60];//variable declaration and short name for local variable
public:
 void getdata()
 {
  cout<<setw(40)<<"\n\n        ::Please enter the required information for passenger number::"<<endl;  
  cout<<"\n\n\nEnter the firstname of passenger: ";
   cin.getline(fname,60);
   cout<<endl;
   cout<<"\tEnter the lastname of passenger:\n ";
   cin.getline(lname,60);
   cout<<endl<<endl;
   cout<<"\tEnter address of passenger: \n ";
   cin.getline(add,60);
   cout<<endl<<endl;
   cout<<"\tEnter the Resevation No. of Ticket\n"<<endl;
   cin.getline(reserv_no,60);
   cout<<endl;
   cout<<"Enter the current location of passenger(IN CAPITAL LETTERS ONLY):  ";
   cin.getline(c_loc,60);
   cout<<endl<<endl;
   cout<<"Enter the destination of passenger(IN CAPITAL LETTERS ONLY):  ";
   cin.getline(dest,60);
   cout<<endl<<endl;
   system("CLS");
 }
 void show()//active names for functions
 {
   cout<<setw(40)<<"Your E-Ticket is :"<<endl; 
   int t=1,r=12345; //variable declaration
  cout<<"                           AIRLINE TICKET                                 "<<endl;
  cout<<"|Ticket No."<<t<<"                                Reference No."<<r<<"\t  "<<endl;
  cout<<"|_________________________________________________________________________"<<endl;
  cout<<"|Resevation No. :"<<reserv_no<<"                                     "<<endl;
  cout<<"|__________________________________________________________________________"<<endl;
  cout<<"|Passenger Information :                                                  "<<endl;
  cout<<"|Name :"<<lname<<"/"<<fname<<"                                     "<<endl;
  cout<<"|                                                                         "<<endl;
  cout<<"|Address :"<<add<<"                                                   "<<endl;
  cout<<"|_________________________________________________________________________"<<endl;
  cout<<"|flight Information :                                                     "<<endl;
  cout<<"|12 aug 2011                                                              "<<endl;
  cout<<"|BOING 747                                                                "<<endl;
  cout<<"|_________________________________________________________________________"<<endl;
  cout<<"|Depart :"<<c_loc<<"                                                      "<<endl;
  cout<<"|Arrive :"<<dest<<"                                                       "<<endl;
  cout<<"|*BAGGAGE allowed 40 Kilos                                                "<<endl;
  cout<<"|*contact Airline to Confirm baggage allowance                            "<<endl;
  cout<<"|_________________________________________________________________________"<<endl;
  ofstream outfile("E:\\E_ticket.txt");
  outfile<<"                           AIRLINE TICKET                                 "<<endl<<
   "|Ticket No."<<t<<"                                Reference No."<<r<<"\t  "<<endl<<
      "|_________________________________________________________________________"<<endl<<
   "|Resevation No. :"<<reserv_no<<"                                     "<<endl<<
   "|__________________________________________________________________________"<<endl<<
      "|Passenger Information :                                                  "<<endl<<
      "|Name :"<<lname<<"/"<<fname<<"                                     "<<endl<<
      "|                                                                         "<<endl<<
      "|Address :"<<add<<"                                                   "<<endl<<
      "|_________________________________________________________________________"<<endl<<
         "|flight Information :                                                     "<<endl<<
      "|12 aug 2011                                                              "<<endl<<
      "|BOING 747                                                                "<<endl<<
      "|_________________________________________________________________________"<<endl<<
      "|Depart :"<<c_loc<<"                                                      "<<endl<<
      "|Arrive :"<<dest<<"                                                       "<<endl<<
      "|*BAGGAGE allowed 40 Kilos                                                "<<endl<<
      "|*contact Airline to Confirm baggage allowance                            "<<endl<<
      "|_________________________________________________________________________"<<endl;
t=t+1;
r=r+1;
 }
};
class search
{
public:
void searching()// active names for functions
 {
  cout<<"\tFOLLOWING ARE THE INTERNATIONAL FLIGHTS AVAILABLE\n"<<endl; //proper identation
  for(int i=0;i<5;i++)//simple name for local variable
  {
  for(int j=0;j<10;j++)//simple name for local variable
  { 
   cout<<"FLIGHT FROM "<<l_destination[i]<<" TO "<<i_destination[j]<<endl;
  }
  }
  }
};
class local: public booking
{
protected:
    int b_seat,e_seat,ch, k, p,option;//variable declaration
 mytime t1;
public:
 void getdata()
 {
  k=p=0;
  cout<<"In which AIRLINE you want to travel"<<endl<<endl;
  cout<<"1)PIA"<<endl;
  cout<<"2)AIR BLUE"<<endl;
  cout<<"3)ARAB EMIRATES"<<endl;
  cout<<"4)QATAR AIRWAYS"<<endl;
  cout<<"enter your choice"<<endl;;
  cin>>option;
  system ("cls");
  switch(option)
  {
  case 1:
   if (option==1)
    cout<<setw(40)<<"\n\n\n                                WELCOME TO PIA"<<endl;
   break;
  case 2:
   if(option==2)
    cout<<setw(40)<<"\n\n\n                                WELCOME TO AIRBLUE"<<endl;
   break;
  case 3:
   if(option==3)
    cout<<setw(40)<<"\n\n\n                                WELCOME TO ARAB EMIRATES"<<endl;
   break;
  case 4:
   if(option==4)
    cout<<setw(40)<<"\n\n\n                                WELCOME TO QATAR AIRWAYS"<<endl;
   break;
  }
  cout<<setw(40)<<"\nTHESE ARE THE LOCAL PLACES AVAILABLE\n\n\n"<<endl;
  cin.ignore();
  for(int i=0;i<5;i++)
  {
   cout<<l_destination[i]<<endl;
  }
  booking::getdata();
  for(int j=0;j<5;j++)
  {
   if(strcmp(l_destination[j],c_loc)==0)
   {
    k++;
   }
  }
  for( int i=0;i<5;i++)
  {
   if(strcmp(l_destination[i],c_loc)==0)
   {
    p++;
   }
  }
  if(k==1&&p==1)
  {
   cout<<" FLIGHT AVAILABLE ON THIS ROUTE"<<endl;
   b_seat=30;
   e_seat=40;
   cout<<"In which class you want to travel?"<<endl;
   cout<<"Make your choice"<<endl<<endl;
   cout<<"\n\n\n\n\n\n";
   cout<<setw(60)<<"*************************************"<<endl;
   cout<<setw(60)<<"*     Press 1 for buisness class    *"<<endl;
   cout<<setw(60)<<"*     Press 2 for economy class     *"<<endl;
   cout<<setw(60)<<"*************************************"<<endl<<endl<<endl<<endl;
   cout<<"Enter your choice"<<endl;
   cin>>ch;
   cout<<endl;
   switch(ch)
   {
   case 1:
    b_seat--;
    if(b_seat<=0)
     cout<<"SORRY NO SEAT AVAILABLE"<<endl;
    else
     cout<<"SEAT AVAILABLE"<<endl;
    break;
   case 2:
    e_seat--;
    if(e_seat<=0)
     cout<<"SORRY NO SEAT AVAILABLE"<<endl;
    else
     cout<<"SEAT AVAILABLE"<<endl;
    break;
   }
   t1.getdata();
   system("CLS");
   booking::show();
   if(ch==1)
   {
    cout<<"|                                                                         "<<endl;
    cout<<"|Ticket Information:                                                      "<<endl;
    cout<<"|BUISNESS CLASS                                                           "<<endl;
    ofstream outfile;
    outfile.open("E:\\E_ticket.txt",ios::app);
    outfile<<"|                                                                         "<<endl<<
             "|Ticket Information:                                                      "<<endl<<
             "|BUISNESS CLASS                                                           "<<endl;
   }
   if(ch==2)
   {
    cout<<"|                                                                         "<<endl;
    cout<<"|Ticket Information:                                                      "<<endl;
    cout<<"|ECONOMY CLASS                                                            "<<endl;
    ofstream outfile;
    outfile.open("E:\\E_ticket.txt",ios::app);
    outfile<<"|                                                                         "<<endl<<
             "|Ticket Information:                                                      "<<endl<<
             "|ECONOMY CLASS                                                           "<<endl;
   }  
   cout<<"|Status: confirmed                                                        "<<endl;
    ofstream outfile;
    outfile.open("E:\\E_ticket.txt",ios::app);
    outfile<<"|Status: confirmed                                                        "<<endl;
    t1.show();
  }
  else  
  {
     cout<<"__________________________________________________________________________"<<endl;
     cout<<"|     SORRY NO FLIGHT AVAILABLE ON THIS ROUTE RIGHT NOW                   "<<endl;
     cout<<"__________________________________________________________________________"<<endl; 
  }
}
 };
 class international:public booking
 {
 protected:
  int b1_seat,e1_seat,choice,c,b,v;//local variable declaration
   char g;
   mytime t1;
   public:
   void getdata()
 {
  b=v=0;
  cout<<"In which AIRLINE you want to travel"<<endl<<endl;
  cout<<"1)PIA"<<endl;
  cout<<"2)AIR BLUE"<<endl;
  cout<<"3)ARAB EMIRATES"<<endl;
  cout<<"4)QATAR AIRWAYS"<<endl;
  cout<<"enter your choice"<<endl;;
  cin>>option;
  system ("cls");
  switch(option)
  {
  case 1:
   if (option==1)
    cout<<setw(40)<<"\n\n\n                                WELCOME TO PIA"<<endl;
   break;
  case 2:
   if(option==2)
    cout<<setw(40)<<"\n\n\n                                WELCOME TO AIRBLUE"<<endl;
   break;
  case 3:
   if(option==3)
    cout<<setw(40)<<"\n\n\n                                WELCOME TO ARAB EMIRATES"<<endl;
   break;
  case 4:
   if(option==4)
    cout<<setw(40)<<"\n\n\n                                WELCOME TO QATAR AIRWAYS"<<endl;
   break;
  } 
   cout<<"\n\nTHESE ARE THE INTERNATIONAL PLACES AVAILABLE"<<endl<<endl;
   cin.ignore();
   for(int i=0;i<10;i++)
   {
    cout<<i_destination[i]<<endl; 
   }
   booking::getdata(); 
   for(int j=0;j<10;j++)
   {  
    if(strcmp(i_destination[j],dest)==0)//paranthesis to resolve ambiguity
    {
     v++;
    }
   }
   for( int i=0;i<5;i++)
   {
    if(strcmp(l_destination[i],c_loc)==0)//paranthesis to resolve ambiguity
    {
     b++;
    }
   }
   if(b==1&&v==1)
   {
    cout<<" FLIGHT AVAILABLE ON THIS ROUTE"<<endl;
    b1_seat=30;//indent to show structure
    e1_seat=40;
    cout<<"In which class you want to travel?"<<endl;
    cout<<"Make your choice"<<endl<<endl;
    cout<<"\n\n\n\n\n\n";
    cout<<setw(60)<<"*************************************"<<endl;
    cout<<setw(60)<<"*     Press 1 for buisness class    *"<<endl;
    cout<<setw(60)<<"*     Press 2 for economy class     *"<<endl;
	cout<<setw(60)<<"*************************************"<<endl<<endl<<endl<<endl;
    cout<<"Enter your choice"<<endl;
    cin>>choice;  
    cout<<endl;
  switch(choice)//switch for multi-way statement
  {
  case 1:
   b1_seat--;
   if(b1_seat<=0)
    cout<<"SORRY NO SEAT AVAILABLE"<<endl;
   else
    cout<<"SEAT AVAILABLE"<<endl;
   break;
  case 2:
   e1_seat--;
   if(e1_seat<=0)
    cout<<"SORRY NO SEAT AVAILABLE"<<endl;
   else
    cout<<"SEAT AVAILABLE"<<endl;
   break;
  }
  t1.getdata();
  system("CLS");
  booking::show();
  if(choice==1)
  {
    cout<<"|                                                                         "<<endl;
    cout<<"|Ticket Information:                                                      "<<endl;
    cout<<"|BUISNESS CLASS                                                           "<<endl;
    ofstream outfile;
    outfile.open("E:\\E_ticket.txt",ios::app);
    outfile<<"|                                                                         "<<endl<<
             "|Ticket Information:                                                      "<<endl<<
             "|BUSINESS CLASS                                                           "<<endl;
  }
  if(choice==2)
  {
    cout<<"|                                                                         "<<endl;
    cout<<"|Ticket Information:                                                      "<<endl;
    cout<<"|ECONOMY CLASS                                                           "<<endl;
    ofstream outfile;
    outfile.open("E:\\E_ticket.txt",ios::app);
    outfile<<"|                                                                         "<<endl<<
             "|Ticket Information:                                                      "<<endl<<
             "|ECONOMY CLASS                                                           "<<endl;
  }
  cout<<"|Status: confirmed                                                        "<<endl;
  ofstream outfile;
    outfile.open("E:\\E_ticket.txt",ios::app);
    outfile<<"|Status: confirmed                                                        "<<endl;
  t1.show();
   }
   else
   {
    cout<<"__________________________________________________________________________"<<endl;
     cout<<"|     SORRY NO FLIGHT AVAILABLE ON THIS ROUTE RIGHT NOW                   "<<endl;
   cout<<"__________________________________________________________________________"<<endl;
   }
}
 };
 class main1
 {
 private:
  char f,a;
  int me_ch;// short name for local variable
 public:
void getdata()
{
m:
   cout<<"\n\n\n\n\n\n";
   cout<<setw(60)<<"*************************************"<<endl;
   cout<<setw(60)<<"*        AIRWAYS RESERVATION        *"<<endl;
   cout<<setw(60)<<"*             MAIN MENU             *"<<endl;
   cout<<setw(60)<<"*        ENTER YOUR CHOICE          *"<<endl;
   cout<<setw(60)<<"*   PRESS 1 FOR LOCAL BOOKING       *"<<endl;
   cout<<setw(60)<<"* PRESS 2 FOR INTERNATIONAL BOOKING *"<<endl;
   cout<<setw(60)<<"*   PRESS 3 FOR SEARCH OF FLIGHTS   *"<<endl;
   cout<<setw(60)<<"*       NOW ENTER YOUR CHOICE:      *"<<endl;
   cout<<setw(60)<<"*************************************"<<endl;
   cin>>me_ch;
  system("cls");
   passenger* p1;// descriptive names
   booking b1;// descriptive names
   international i1;//descriptive names
   local l1;
   char back;
   switch(me_ch)//switch for multi-way statement
   {
   case 1:
    p1=&l1;
    p1->getdata();
    cout<<"To Go To Main Menu Press b"<<endl;
    cin>>back;
    system("CLS");
    if (back=='b'){
     goto m;}
    else{
     cout<<"\n\n\n\n\n\n";//proper indentation
     cout<<setw(40)<<"BYE FROM AIR RESERVATION SYSTEM";}
    break;//end of case1
   case 2:
    p1=&i1;
    p1->getdata();
    cout<<"To Go To Main Menu Press b"<<endl;
    cin>>back;
    system("CLS");
    if (back=='b')
    {
     goto m;
    }
    else{
     cout<<"\n\n\n\n\n\n";
     cout<<setw(40)<<"BYE FROM AIR RESERVATION SYSTEM";}
    break;
   case 3:
    search s1;
    s1.searching();
    cout<<"To Go To Main Menu Press b"<<endl;
    cin>>back;
    system("CLS");
    if (back=='b'){
     goto m;}   
    else{
     cout<<"\n\n\n\n\n\n";
     cout<<setw(40)<<"BYE FROM AIR RESERVATION SYSTEM";}
    break;
}
} 
};
int main()
{ SetConsoleTitle("AIRWAYS RESERVATION");
 cout<<"\n\n\n\n\n\n\n\n\n\n\t\t     WELCOME TO AIRWAYS RESERVATION SYSTEM";
 system ("cls");
 main1 m1;
 m1.getdata();
}
